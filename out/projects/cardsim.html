<!DOCTYPE html><html lang="en" class="__className_42e952"><head><meta charSet="utf-8"/><meta name="viewport" content="initial-scale=1, width=device-width"/><meta name="next-head-count" content="2"/><link rel="shortcut icon" href="/favicon.ico"/><meta name="emotion-insertion-point" content=""/><style data-emotion="mui-style-global o6gwfi">html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;box-sizing:border-box;-webkit-text-size-adjust:100%;}*,*::before,*::after{box-sizing:inherit;}strong,b{font-weight:700;}body{margin:0;color:rgba(0, 0, 0, 0.87);font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1rem;line-height:1.5;letter-spacing:0.00938em;background-color:#fff;}@media print{body{background-color:#fff;}}body::backdrop{background-color:#fff;}</style><style data-emotion="mui-style 10bulu5 bo5c3t 1m9pwf3 1r0aews 1ju1kxc vubbuv">.mui-style-10bulu5{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;width:58px;height:38px;overflow:hidden;padding:12px;box-sizing:border-box;position:relative;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;z-index:0;vertical-align:middle;-webkit-transform:translate(0,-4px);-moz-transform:translate(0,-4px);-ms-transform:translate(0,-4px);transform:translate(0,-4px);}@media print{.mui-style-10bulu5{-webkit-print-color-adjust:exact;color-adjust:exact;}}.mui-style-bo5c3t{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;padding:9px;border-radius:50%;position:absolute;top:0;left:0;z-index:1;color:#fff;-webkit-transition:left 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,-webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:left 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;}.mui-style-bo5c3t::-moz-focus-inner{border-style:none;}.mui-style-bo5c3t.Mui-disabled{pointer-events:none;cursor:default;}@media print{.mui-style-bo5c3t{-webkit-print-color-adjust:exact;color-adjust:exact;}}.mui-style-bo5c3t.Mui-checked{-webkit-transform:translateX(20px);-moz-transform:translateX(20px);-ms-transform:translateX(20px);transform:translateX(20px);}.mui-style-bo5c3t.Mui-disabled{color:#f5f5f5;}.mui-style-bo5c3t.Mui-checked+.MuiSwitch-track{opacity:0.5;}.mui-style-bo5c3t.Mui-disabled+.MuiSwitch-track{opacity:0.12;}.mui-style-bo5c3t .MuiSwitch-input{left:-100%;width:300%;}.mui-style-bo5c3t:hover{background-color:rgba(0, 0, 0, 0.04);}@media (hover: none){.mui-style-bo5c3t:hover{background-color:transparent;}}.mui-style-bo5c3t.Mui-checked{color:#9c27b0;}.mui-style-bo5c3t.Mui-checked:hover{background-color:rgba(156, 39, 176, 0.04);}@media (hover: none){.mui-style-bo5c3t.Mui-checked:hover{background-color:transparent;}}.mui-style-bo5c3t.Mui-checked.Mui-disabled{color:rgb(217, 172, 224);}.mui-style-bo5c3t.Mui-checked+.MuiSwitch-track{background-color:#9c27b0;}.mui-style-1m9pwf3{cursor:inherit;position:absolute;opacity:0;width:100%;height:100%;top:0;left:0;margin:0;padding:0;z-index:1;}.mui-style-1r0aews{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;color:black;-webkit-transform:translate(0,-2px);-moz-transform:translate(0,-2px);-ms-transform:translate(0,-2px);transform:translate(0,-2px);}.mui-style-1ju1kxc{height:100%;width:100%;border-radius:7px;z-index:-1;-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;background-color:#000;opacity:0.38;}.mui-style-vubbuv{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;}</style><link rel="preload" href="/_next/static/css/3a6e4911cad319bf.css" as="style" crossorigin=""/><link rel="stylesheet" href="/_next/static/css/3a6e4911cad319bf.css" crossorigin="" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-87b3a303122f2f0d.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/framework-10fac88913917d91.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/main-a91bf1c8af8380e6.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/_app-9282596e661be58a.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/ee8b1517-4f0f110af3a5b23f.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/291-b8d1334d578aee83.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/979-a3f1d1a36b31741b.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/967-f4e8f6e946d02187.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/853-7c1608d20f70b491.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/858-1c6409d85173cbe9.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/549-47ebff9b143a1b5a.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/projects/cardsim-71a52ab0366cb054.js" defer="" crossorigin=""></script><script src="/_next/static/24fTu9mgmmVrSThJnis46/_buildManifest.js" defer="" crossorigin=""></script><script src="/_next/static/24fTu9mgmmVrSThJnis46/_ssgManifest.js" defer="" crossorigin=""></script></head><body class="font-mono text-lightTextPrimary dark:dark-darkTextPrimary bg-lightBackground dark:bg-darkBackground transition duration-300"><div id="__next"><div class="group grid grid-cols-2 gap-0"><div class="m-2"> <div class="ml-[5%] mobile:ml-2 mt-1 h-[20pt] w-1/2 hover:w-screen transition duration-300 flex gap-4"><a class="text-black dark:text-white hover:text-purple dark:hover:text-yellow" href="/blog.html">Blog</a><a class="text-black dark:text-white hover:text-purple dark:hover:text-yellow" href="/projects.html">Projects</a><a class="text-black dark:text-white hover:text-purple dark:hover:text-yellow" href="/">Home</a><a class="group-hover:opacity-100 text-black dark:text-white hover:text-purple dark:hover:text-yellow" href="/David_Cincotta_Resume_v3.0.pdf" target="_blank" rel="noopener noreferrer">Resume</a><a class="invisible opacity-0 group-hover:opacity-100 text-black dark:text-white hover:text-purple dark:hover:text-yellow" href="/about.html">About</a></div> </div><div class="place-self-end m-2"> <span class="MuiSwitch-root MuiSwitch-sizeMedium mui-style-10bulu5"><span class="MuiButtonBase-root MuiSwitch-switchBase MuiSwitch-colorSecondary PrivateSwitchBase-root MuiSwitch-switchBase MuiSwitch-colorSecondary mui-style-bo5c3t"><input class="PrivateSwitchBase-input MuiSwitch-input mui-style-1m9pwf3" type="checkbox"/><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-style-1r0aews" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="DarkModeIcon"><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1"></path></svg></span><span class="MuiSwitch-track mui-style-1ju1kxc"></span></span> </div></div><div class="flex items-center transition duration-300 w-screen justify-center text-black dark:text-white"><div id="maingrid" class="grid grid-cols-10 gap-0 w-[95vw] content-center self-center"><pre class="col-start-2 col-end-10 place-self-center text-[6px] overflow-scroll mobile:text-[2px] font-extrabold">                                                                                                                                                                                                                 
        CCCCCCCCCCCCC                                                 d::::::d        SSSSSSSSSSSSSSS hhhhhhh                                  ffffffffffffffff    ffffffffffffffff  lllllll                     
     CCC::::::::::::C                                                 d::::::d      SS:::::::::::::::Sh:::::h                                 f::::::::::::::::f  f::::::::::::::::f l:::::l                     
   CC:::::::::::::::C                                                 d::::::d     S:::::SSSSSS::::::Sh:::::h                                f::::::::::::::::::ff::::::::::::::::::fl:::::l                     
  C:::::CCCCCCCC::::C                                                 d:::::d      S:::::S     SSSSSSSh:::::h                                f::::::fffffff:::::ff::::::fffffff:::::fl:::::l                     
 C:::::C       CCCCCC  aaaaaaaaaaaaa  rrrrr   rrrrrrrrr       ddddddddd:::::d      S:::::S             h::::h hhhhh       uuuuuu    uuuuuu   f:::::f       fffffff:::::f       ffffff l::::l     eeeeeeeeeeee    
C:::::C                a::::::::::::a r::::rrr:::::::::r    dd::::::::::::::d      S:::::S             h::::hh:::::hhh    u::::u    u::::u   f:::::f             f:::::f              l::::l   ee::::::::::::ee  
C:::::C                aaaaaaaaa:::::ar:::::::::::::::::r  d::::::::::::::::d       S::::SSSS          h::::::::::::::hh  u::::u    u::::u  f:::::::ffffff      f:::::::ffffff        l::::l  e::::::eeeee:::::ee
C:::::C                         a::::arr::::::rrrrr::::::rd:::::::ddddd:::::d        SS::::::SSSSS     h:::::::hhh::::::h u::::u    u::::u  f::::::::::::f      f::::::::::::f        l::::l e::::::e     e:::::e
C:::::C                  aaaaaaa:::::a r:::::r     r:::::rd::::::d    d:::::d          SSS::::::::SS   h::::::h   h::::::hu::::u    u::::u  f::::::::::::f      f::::::::::::f        l::::l e:::::::eeeee::::::e
C:::::C                aa::::::::::::a r:::::r     rrrrrrrd:::::d     d:::::d             SSSSSS::::S  h:::::h     h:::::hu::::u    u::::u  f:::::::ffffff      f:::::::ffffff        l::::l e:::::::::::::::::e 
C:::::C               a::::aaaa::::::a r:::::r            d:::::d     d:::::d                  S:::::S h:::::h     h:::::hu::::u    u::::u   f:::::f             f:::::f              l::::l e::::::eeeeeeeeeee  
 C:::::C       CCCCCCa::::a    a:::::a r:::::r            d:::::d     d:::::d                  S:::::S h:::::h     h:::::hu:::::uuuu:::::u   f:::::f             f:::::f              l::::l e:::::::e           
  C:::::CCCCCCCC::::Ca::::a    a:::::a r:::::r            d::::::ddddd::::::dd     SSSSSSS     S:::::S h:::::h     h:::::hu:::::::::::::::uuf:::::::f           f:::::::f            l::::::le::::::::e          
   CC:::::::::::::::Ca:::::aaaa::::::a r:::::r             d:::::::::::::::::d     S::::::SSSSSS:::::S h:::::h     h:::::h u:::::::::::::::uf:::::::f           f:::::::f            l::::::l e::::::::eeeeeeee  
     CCC::::::::::::C a::::::::::aa:::ar:::::r              d:::::::::ddd::::d     S:::::::::::::::SS  h:::::h     h:::::h  uu::::::::uu:::uf:::::::f           f:::::::f            l::::::l  ee:::::::::::::e  
        CCCCCCCCCCCCC  aaaaaaaaaa  aaaarrrrrrr               ddddddddd   ddddd      SSSSSSSSSSSSSSS    hhhhhhh     hhhhhhh    uuuuuuuu  uuuufffffffff           fffffffff            llllllll    eeeeeeeeeeeeee  
</pre><div id="intro" class="col-span-7 mobile:col-span-10"><br/> <br/><p>Have you ever experienced those poker nights where straights or higher appeared every other hand? On such occasions, I&#x27;ve walked away from the table cursing the dealer for not shuffling enough. But even so, how are four straights in a row statistically possible?</p><br/><p>The goal of this project is to understand the phrase: &quot;seven riffle shuffles are enough to perfectly shuffle a deck of cards.&quot; In the real world, expecting seven shuffles for every hand of poker is far too much. Furthermore, poor technique and alternative shuffling methods are all too common in home games.</p><br/><p>This challenge is difficult to solve with combinatorics, but I will introduce some relevant equations to gauge the accuracy of the simulations. Some of the programs are written in C++, while others are in Python 3. These are all relatively simple simulations, but I got tired of writing boilerplate code in C++ and realized Jupyter Notebook was a better environment for this project.</p><br/><p>Lets get started with some of the most common card shuffling techniques:</p><br/></div><div class="col-start-2 col-span-11"><div class="col-start-2 mobile:col-start-2 mobile:col-end-10 col-end-6"><br/><br/><ol class="list-decimal"><li><a class="mouseClose">Riffle</a>: Interweave two packs of cards</li><br/><li><a class="mouseClose">Hindu</a> and <a class="mouseClose">Overhand</a>: Move a packet from one hand, to the bottom of a new stack in the other.</li><br/><li><a class="mouseClose">Cut</a>: Split the deck and place one stack on the other.</li><br/><li><a class="mouseClose">Faro</a>: Resembles a riffle shuffle, but every card is interwoven perfectly.</li></ol><br/><br/></div><div id="preview" class="transition rounded-[10px] sepia duration-300 opacity-100 bg-center bg-cover h-[40vh] w-[70vh] mobile:col-start-2 mobile:col-end-10 mobile:h-[0px] mobile:delay-200 m-5 mobile:h-[300px] overflow-hidden bg-black text-white m-6 pt-[60px] pl-[60px] text-2xl "><p id="previewText" class="opacity-100 transition duration-300">Desktop: Hover links to see shuffle examples <br/><br/> Mobile: Click</p></div></div><div class="col-span-7 mobile:col-span-10"><p class="text-3xl">Simulation Parameters, Sample Sizes and Optimization</p><p>A difficulty with this type of simulation is obtaining a large enough sample size. Because there are two parameters in this simulation—shuffle quality and number of shuffles—the total number of simulations becomes multiplicative and, consequently, costly. I&#x27;ve managed to keep all the runs under one hour in length, with the express goal of exceeding the number of samples needed to reach statistical significance. I will demonstrate how to calculate the statistically required number of runs, but to produce visually appealing graphs, I always surpass this.</p><br/><p>A note on optimization: Every shuffle can be executed in O(deck = 52) time complexity. There might be some minor optimization possible for these functions, but is it worth the effort? Multithreading only yielded around a 6x speedup on 8 cores. Perhaps a clean 8x speedup would be achievable if locking/shared memory was eliminated.</p><br/><p>I will discuss how the mechanics of card shuffling techniques impact the distribution of cards in the deck, the overall deck randomness, and how this results in skewed probabilities in real table games.</p></div><div class="col-span-7 mobile:col-span-10"><br/> <br/><p class="text-3xl">Riffle Analysis</p><br/> <br/></div><div class="col-start-2 col-end-8 mobile:col-start-2 mobile:col-end-10"> <br/> <pre id=":R8cl6:" class="growIn ring-2 ring-black dark:ring-white element h-fit w-fit relative m-6 text-sm p-3 rounded-lg overflow-scroll mobile:w-auto" style="color:#3c3836;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#f9f5d7"><div id=":R8cl6:decoration" class="absolute right-2 top-2 transition duration-300 flex"><button class="transition duration-300 rounded outline-dashed outline-1 outline-offset-2 mr-[20px] opacity-50 hover:opacity-100 hover:text-lightWarning click focus-scale-75 active:scale-75">shrink</button><p class="mr-2 opacity-50">cpp</p><a class=""><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium transition duration-100 focus:scale-75 active:scale-75  opacity-20  hover:opacity-100 hover:fill-lightWarning click mui-style-vubbuv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ContentCopyTwoToneIcon"><path d="M8 7h11v14H8z" opacity=".3"></path><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></a></div><code class="language-cpp" style="color:#3c3836;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">1</span><span class="token token" style="color:#9d0006">void</span><span> </span><span class="token token" style="color:#b57614">riffle</span><span class="token token" style="color:#7c6f64">(</span><span class="token token" style="color:#9d0006">int</span><span class="token token" style="color:#7c6f64">*</span><span> arr</span><span class="token token" style="color:#7c6f64">,</span><span class="token token" style="color:#9d0006">int</span><span> maxpacket</span><span class="token token" style="color:#7c6f64">)</span><span class="token token" style="color:#7c6f64">{</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">2</span><span>    </span><span class="token token" style="color:#9d0006">int</span><span> left</span><span class="token token" style="color:#7c6f64">[</span><span>n</span><span class="token token" style="color:#7c6f64">/</span><span class="token token" style="color:#8f3f71">2</span><span class="token token" style="color:#7c6f64">]</span><span class="token token" style="color:#7c6f64">;</span><span> </span><span class="token token" style="color:#9d0006">int</span><span> right</span><span class="token token" style="color:#7c6f64">[</span><span>n</span><span class="token token" style="color:#7c6f64">/</span><span class="token token" style="color:#8f3f71">2</span><span class="token token" style="color:#7c6f64">]</span><span class="token token" style="color:#7c6f64">;</span><span class="token token" style="color:#9d0006">int</span><span> i</span><span class="token token" style="color:#7c6f64">=</span><span class="token token" style="color:#8f3f71">0</span><span class="token token" style="color:#7c6f64">;</span><span class="token token" style="color:#9d0006">int</span><span> li</span><span class="token token" style="color:#7c6f64">=</span><span class="token token" style="color:#8f3f71">0</span><span class="token token" style="color:#7c6f64">;</span><span class="token token" style="color:#9d0006">int</span><span> ri</span><span class="token token" style="color:#7c6f64">=</span><span class="token token" style="color:#8f3f71">0</span><span class="token token" style="color:#7c6f64">;</span><span class="token token" style="color:#9d0006">bool</span><span> swapdeck</span><span class="token token" style="color:#7c6f64">=</span><span class="token token" style="color:#b57614">rand</span><span class="token token" style="color:#7c6f64">(</span><span class="token token" style="color:#7c6f64">)</span><span class="token token" style="color:#7c6f64">%</span><span class="token token" style="color:#8f3f71">2</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">3</span><span>    </span><span class="token token" style="color:#7c6f64">//split deck into two packets, left and right</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">4</span><span>    </span><span class="token token" style="color:#9d0006">for</span><span class="token token" style="color:#7c6f64">(</span><span class="token token" style="color:#9d0006">int</span><span> i </span><span class="token token" style="color:#7c6f64">=</span><span> </span><span class="token token" style="color:#8f3f71">0</span><span class="token token" style="color:#7c6f64">;</span><span> i</span><span class="token token" style="color:#7c6f64">&lt;</span><span>n</span><span class="token token" style="color:#7c6f64">;</span><span> i</span><span class="token token" style="color:#7c6f64">++</span><span class="token token" style="color:#7c6f64">)</span><span class="token token" style="color:#7c6f64">{</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">5</span><span>        </span><span class="token token" style="color:#9d0006">if</span><span class="token token" style="color:#7c6f64">(</span><span>i</span><span class="token token" style="color:#7c6f64">&lt;</span><span>n</span><span class="token token" style="color:#7c6f64">/</span><span class="token token" style="color:#8f3f71">2</span><span class="token token" style="color:#7c6f64">)</span><span>   left</span><span class="token token" style="color:#7c6f64">[</span><span>li</span><span class="token token" style="color:#7c6f64">++</span><span class="token token" style="color:#7c6f64">]</span><span> </span><span class="token token" style="color:#7c6f64">=</span><span> arr</span><span class="token token" style="color:#7c6f64">[</span><span>i</span><span class="token token" style="color:#7c6f64">]</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">6</span><span>        </span><span class="token token" style="color:#9d0006">else</span><span>        right</span><span class="token token" style="color:#7c6f64">[</span><span>ri</span><span class="token token" style="color:#7c6f64">++</span><span class="token token" style="color:#7c6f64">]</span><span> </span><span class="token token" style="color:#7c6f64">=</span><span> arr</span><span class="token token" style="color:#7c6f64">[</span><span>i</span><span class="token token" style="color:#7c6f64">]</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">7</span><span>    </span><span class="token token" style="color:#7c6f64">}</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">8</span><span>    i </span><span class="token token" style="color:#7c6f64">=</span><span> </span><span class="token token" style="color:#8f3f71">0</span><span class="token token" style="color:#7c6f64">;</span><span> li </span><span class="token token" style="color:#7c6f64">=</span><span> </span><span class="token token" style="color:#8f3f71">0</span><span class="token token" style="color:#7c6f64">;</span><span> ri </span><span class="token token" style="color:#7c6f64">=</span><span> </span><span class="token token" style="color:#8f3f71">0</span><span class="token token" style="color:#7c6f64">;</span><span> </span><span class="token token" style="color:#9d0006">int</span><span> packet</span><span class="token token" style="color:#7c6f64">=</span><span class="token token" style="color:#b57614">rand</span><span class="token token" style="color:#7c6f64">(</span><span class="token token" style="color:#7c6f64">)</span><span class="token token" style="color:#7c6f64">%</span><span>maxpacket</span><span class="token token" style="color:#7c6f64">+</span><span class="token token" style="color:#8f3f71">1</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">9</span><span>    </span><span class="token token" style="color:#9d0006">while</span><span class="token token" style="color:#7c6f64">(</span><span>i</span><span class="token token" style="color:#7c6f64">&lt;</span><span>n</span><span class="token token" style="color:#7c6f64">)</span><span class="token token" style="color:#7c6f64">{</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">10</span><span>        </span><span class="token token" style="color:#7c6f64">//interweave next card in packet</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">11</span><span>        </span><span class="token token" style="color:#9d0006">if</span><span class="token token" style="color:#7c6f64">(</span><span>swapdeck</span><span class="token token" style="color:#7c6f64">)</span><span>    arr</span><span class="token token" style="color:#7c6f64">[</span><span>i</span><span class="token token" style="color:#7c6f64">++</span><span class="token token" style="color:#7c6f64">]</span><span> </span><span class="token token" style="color:#7c6f64">=</span><span> left</span><span class="token token" style="color:#7c6f64">[</span><span>li</span><span class="token token" style="color:#7c6f64">++</span><span class="token token" style="color:#7c6f64">]</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">12</span><span>        </span><span class="token token" style="color:#9d0006">else</span><span>            arr</span><span class="token token" style="color:#7c6f64">[</span><span>i</span><span class="token token" style="color:#7c6f64">++</span><span class="token token" style="color:#7c6f64">]</span><span> </span><span class="token token" style="color:#7c6f64">=</span><span> right</span><span class="token token" style="color:#7c6f64">[</span><span>ri</span><span class="token token" style="color:#7c6f64">++</span><span class="token token" style="color:#7c6f64">]</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">13</span><span>        </span><span class="token token" style="color:#9d0006">if</span><span class="token token" style="color:#7c6f64">(</span><span class="token token" style="color:#7c6f64">--</span><span>packet</span><span class="token token" style="color:#7c6f64">==</span><span class="token token" style="color:#8f3f71">0</span><span class="token token" style="color:#7c6f64">)</span><span class="token token" style="color:#7c6f64">{</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">14</span><span>            </span><span class="token token" style="color:#7c6f64">//make a new random packet, pulling from the other side</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">15</span><span>            packet</span><span class="token token" style="color:#7c6f64">=</span><span class="token token" style="color:#b57614">rand</span><span class="token token" style="color:#7c6f64">(</span><span class="token token" style="color:#7c6f64">)</span><span class="token token" style="color:#7c6f64">%</span><span>maxpacket</span><span class="token token" style="color:#7c6f64">+</span><span class="token token" style="color:#8f3f71">1</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">16</span><span>            swapdeck </span><span class="token token" style="color:#7c6f64">=</span><span> </span><span class="token token" style="color:#7c6f64">!</span><span>swapdeck</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">17</span><span>        </span><span class="token token" style="color:#7c6f64">}</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">18</span><span>        </span><span class="token token" style="color:#7c6f64">//if one packet has been exausted, pull from the other exclusively</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">19</span><span>        </span><span class="token token" style="color:#7c6f64">//(packet size no longer matters)</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">20</span><span>        </span><span class="token token" style="color:#9d0006">if</span><span class="token token" style="color:#7c6f64">(</span><span>li</span><span class="token token" style="color:#7c6f64">+</span><span class="token token" style="color:#8f3f71">1</span><span class="token token" style="color:#7c6f64">&gt;</span><span>n</span><span class="token token" style="color:#7c6f64">/</span><span class="token token" style="color:#8f3f71">2</span><span class="token token" style="color:#7c6f64">)</span><span> swapdeck </span><span class="token token" style="color:#7c6f64">=</span><span> </span><span class="token token" style="color:#9d0006">false</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">21</span><span>        </span><span class="token token" style="color:#9d0006">else</span><span> </span><span class="token token" style="color:#9d0006">if</span><span class="token token" style="color:#7c6f64">(</span><span>ri</span><span class="token token" style="color:#7c6f64">+</span><span class="token token" style="color:#8f3f71">1</span><span class="token token" style="color:#7c6f64">&gt;</span><span>n</span><span class="token token" style="color:#7c6f64">/</span><span class="token token" style="color:#8f3f71">2</span><span class="token token" style="color:#7c6f64">)</span><span> swapdeck </span><span class="token token" style="color:#7c6f64">=</span><span> </span><span class="token token" style="color:#9d0006">true</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">22</span><span>    </span><span class="token token" style="color:#7c6f64">}</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">23</span><span></span><span class="token token" style="color:#7c6f64">}</span></span></code></pre> </div><br/><div class="col-span-7 mobile:col-span-10"><br/><p>Now we can run this simulation for a single deck 15 times, then repeat that simulation for a few hundred thousand runs to guarantee statistical significance.</p><br/><p>A few notes about how the simulation and analysis are performed:</p><br/></div><div class="col-start-2 mobile:col-start-2 mobile:col-end-10 col-end-6"><ol class="list-decimal"><li>Iteration: An individual deck after a certain number of shuffles</li><br/><li>X-Axis: number of shuffle iterations</li><br/><li>Y-Axis: average possition on a particular iteration</li><br/><li>Runs per iteration: ~210,000</li><br/><li>Total shuffles in simulation: 3.2 million</li><br/><li>Y1-Axis: number from range 0 to max entropy</li><br/><li>Entropy: information theory concept which measures the of randomness of a set. This is the standard method to measure randomness in a deck of cards.</li><br/><div class="dark:fill-textDarkPrimary"><svg width="44.688ex" height="5.676ex" viewBox="0 -1078.4 19240.4 2443.8"><defs aria-hidden="true"><path stroke-width="1" id="E1-MJMAIN-48" d="M128 622Q121 629 117 631T101 634T58 637H25V683H36Q57 680 180 680Q315 680 324 683H335V637H302Q262 636 251 634T233 622L232 500V378H517V622Q510 629 506 631T490 634T447 637H414V683H425Q446 680 569 680Q704 680 713 683H724V637H691Q651 636 640 634T622 622V61Q628 51 639 49T691 46H724V0H713Q692 3 569 3Q434 3 425 0H414V46H447Q489 47 498 49T517 61V332H232V197L233 61Q239 51 250 49T302 46H335V0H324Q303 3 180 3Q45 3 36 0H25V46H58Q100 47 109 49T128 61V622Z"></path><path stroke-width="1" id="E1-MJMAIN-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path stroke-width="1" id="E1-MJMATHI-58" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"></path><path stroke-width="1" id="E1-MJMAIN-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path stroke-width="1" id="E1-MJMAIN-3A" d="M78 370Q78 394 95 412T138 430Q162 430 180 414T199 371Q199 346 182 328T139 310T96 327T78 370ZM78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path><path stroke-width="1" id="E1-MJMAIN-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path stroke-width="1" id="E1-MJMAIN-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path stroke-width="1" id="E1-MJSZ2-2211" d="M60 948Q63 950 665 950H1267L1325 815Q1384 677 1388 669H1348L1341 683Q1320 724 1285 761Q1235 809 1174 838T1033 881T882 898T699 902H574H543H251L259 891Q722 258 724 252Q725 250 724 246Q721 243 460 -56L196 -356Q196 -357 407 -357Q459 -357 548 -357T676 -358Q812 -358 896 -353T1063 -332T1204 -283T1307 -196Q1328 -170 1348 -124H1388Q1388 -125 1381 -145T1356 -210T1325 -294L1267 -449L666 -450Q64 -450 61 -448Q55 -446 55 -439Q55 -437 57 -433L590 177Q590 178 557 222T452 366T322 544L56 909L55 924Q55 945 60 948Z"></path><path stroke-width="1" id="E1-MJMATHI-78" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path><path stroke-width="1" id="E1-MJMAIN-2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"></path><path stroke-width="1" id="E1-MJCAL-58" d="M324 614Q291 576 250 573Q231 573 231 584Q231 589 232 592Q235 601 244 614T271 643T324 671T400 683H403Q462 683 481 610Q485 594 490 545T498 454L501 413Q504 413 551 442T648 509T705 561Q707 565 707 578Q707 610 682 614Q667 614 667 626Q667 641 695 662T755 683Q765 683 775 680T796 662T807 623Q807 596 792 572T713 499T530 376L505 361V356Q508 346 511 278T524 148T557 75Q569 69 580 69Q585 69 593 77Q624 108 660 110Q667 110 670 110T676 106T678 94Q668 59 624 30T510 0Q487 0 471 9T445 32T430 71T422 117T417 173Q416 183 416 188Q413 214 411 244T407 286T405 299Q403 299 344 263T223 182T154 122Q152 118 152 105Q152 69 180 69Q183 69 187 66T191 60L192 58V56Q192 41 163 21T105 0Q94 0 84 3T63 21T52 60Q52 77 56 90T85 131T155 191Q197 223 259 263T362 327T402 352L391 489Q391 492 390 505T387 526T384 547T379 568T372 586T361 602T348 611Q346 612 341 613T333 614H324Z"></path><path stroke-width="1" id="E1-MJMATHI-70" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"></path><path stroke-width="1" id="E1-MJMAIN-6C" d="M42 46H56Q95 46 103 60V68Q103 77 103 91T103 124T104 167T104 217T104 272T104 329Q104 366 104 407T104 482T104 542T103 586T103 603Q100 622 89 628T44 637H26V660Q26 683 28 683L38 684Q48 685 67 686T104 688Q121 689 141 690T171 693T182 694H185V379Q185 62 186 60Q190 52 198 49Q219 46 247 46H263V0H255L232 1Q209 2 183 2T145 3T107 3T57 1L34 0H26V46H42Z"></path><path stroke-width="1" id="E1-MJMAIN-6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z"></path><path stroke-width="1" id="E1-MJMAIN-67" d="M329 409Q373 453 429 453Q459 453 472 434T485 396Q485 382 476 371T449 360Q416 360 412 390Q410 404 415 411Q415 412 416 414V415Q388 412 363 393Q355 388 355 386Q355 385 359 381T368 369T379 351T388 325T392 292Q392 230 343 187T222 143Q172 143 123 171Q112 153 112 133Q112 98 138 81Q147 75 155 75T227 73Q311 72 335 67Q396 58 431 26Q470 -13 470 -72Q470 -139 392 -175Q332 -206 250 -206Q167 -206 107 -175Q29 -140 29 -75Q29 -39 50 -15T92 18L103 24Q67 55 67 108Q67 155 96 193Q52 237 52 292Q52 355 102 398T223 442Q274 442 318 416L329 409ZM299 343Q294 371 273 387T221 404Q192 404 171 388T145 343Q142 326 142 292Q142 248 149 227T179 192Q196 182 222 182Q244 182 260 189T283 207T294 227T299 242Q302 258 302 292T299 343ZM403 -75Q403 -50 389 -34T348 -11T299 -2T245 0H218Q151 0 138 -6Q118 -15 107 -34T95 -74Q95 -84 101 -97T122 -127T170 -155T250 -167Q319 -167 361 -139T403 -75Z"></path><path stroke-width="1" id="E1-MJAMS-45" d="M12 666Q12 675 24 683H582Q590 680 593 672V588Q593 514 591 502T575 490Q567 490 563 495T555 517Q552 556 517 590Q486 623 445 634T340 648H282Q266 636 264 620T260 492V370H277Q329 375 358 391T404 439Q420 480 420 506Q420 529 436 529Q445 529 451 521Q455 517 455 361Q455 333 455 298T456 253Q456 217 453 207T437 197Q420 196 420 217Q420 240 406 270Q377 328 284 335H260V201Q261 174 261 134Q262 73 264 61T278 38Q281 36 282 35H331Q400 35 449 50Q571 93 602 179Q605 203 622 203Q629 203 634 197T640 183Q638 181 624 95T604 3L600 -1H24Q12 5 12 16Q12 35 51 35Q92 38 97 52Q102 60 102 341T97 632Q91 645 51 648Q12 648 12 666ZM137 341Q137 131 136 89T130 37Q129 36 129 35H235Q233 41 231 48L226 61V623L231 635L235 648H129Q132 641 133 638T135 603T137 517T137 341ZM557 603V648H504Q504 646 515 639Q527 634 542 619L557 603ZM420 317V397L406 383Q394 370 380 363L366 355Q373 350 382 346Q400 333 409 328L420 317ZM582 61L586 88Q585 88 582 83Q557 61 526 46L511 37L542 35H577Q577 36 578 39T580 49T582 61Z"></path><path stroke-width="1" id="E1-MJMAIN-5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z"></path><path stroke-width="1" id="E1-MJMAIN-5D" d="M22 710V750H159V-250H22V-210H119V710H22Z"></path><path stroke-width="1" id="E1-MJMAIN-2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)" aria-hidden="true"><use href="#E1-MJMAIN-48" x="0" y="0"></use><use href="#E1-MJMAIN-28" x="750" y="0"></use><use href="#E1-MJMATHI-58" x="1140" y="0"></use><use href="#E1-MJMAIN-29" x="1992" y="0"></use><g transform="translate(2659,0)"><use href="#E1-MJMAIN-3A"></use><use href="#E1-MJMAIN-3D" x="278" y="0"></use></g><use href="#E1-MJMAIN-2212" x="3994" y="0"></use><g transform="translate(4939,0)"><use href="#E1-MJSZ2-2211" x="1" y="0"></use><g transform="translate(0,-1102)"><use transform="scale(0.707)" href="#E1-MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" href="#E1-MJMAIN-2208" x="572" y="0"></use><use transform="scale(0.707)" href="#E1-MJCAL-58" x="1240" y="0"></use></g></g><use href="#E1-MJMATHI-70" x="6554" y="0"></use><use href="#E1-MJMAIN-28" x="7057" y="0"></use><use href="#E1-MJMATHI-78" x="7447" y="0"></use><use href="#E1-MJMAIN-29" x="8019" y="0"></use><g transform="translate(8575,0)"><use href="#E1-MJMAIN-6C"></use><use href="#E1-MJMAIN-6F" x="278" y="0"></use><use href="#E1-MJMAIN-67" x="779" y="0"></use></g><use href="#E1-MJMATHI-70" x="10022" y="0"></use><use href="#E1-MJMAIN-28" x="10525" y="0"></use><use href="#E1-MJMATHI-78" x="10915" y="0"></use><use href="#E1-MJMAIN-29" x="11487" y="0"></use><use href="#E1-MJMAIN-3D" x="12154" y="0"></use><use href="#E1-MJAMS-45" x="13211" y="0"></use><use href="#E1-MJMAIN-5B" x="13878" y="0"></use><use href="#E1-MJMAIN-2212" x="14157" y="0"></use><g transform="translate(15102,0)"><use href="#E1-MJMAIN-6C"></use><use href="#E1-MJMAIN-6F" x="278" y="0"></use><use href="#E1-MJMAIN-67" x="779" y="0"></use></g><use href="#E1-MJMATHI-70" x="16548" y="0"></use><use href="#E1-MJMAIN-28" x="17051" y="0"></use><use href="#E1-MJMATHI-58" x="17441" y="0"></use><use href="#E1-MJMAIN-29" x="18293" y="0"></use><use href="#E1-MJMAIN-5D" x="18683" y="0"></use><use href="#E1-MJMAIN-2C" x="18961" y="0"></use></g></svg></div><br/><pre id=":R12il6:" class="growIn ring-2 ring-black dark:ring-white element h-fit w-fit relative m-6 text-sm p-3 rounded-lg overflow-scroll mobile:w-auto" style="color:#3c3836;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#f9f5d7"><div id=":R12il6:decoration" class="absolute right-2 top-2 transition duration-300 flex"><button class="transition duration-300 rounded outline-dashed outline-1 outline-offset-2 mr-[20px] opacity-50 hover:opacity-100 hover:text-lightWarning click focus-scale-75 active:scale-75">shrink</button><p class="mr-2 opacity-50">cpp</p><a class=""><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium transition duration-100 focus:scale-75 active:scale-75  opacity-20  hover:opacity-100 hover:fill-lightWarning click mui-style-vubbuv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ContentCopyTwoToneIcon"><path d="M8 7h11v14H8z" opacity=".3"></path><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></a></div><code class="language-cpp" style="color:#3c3836;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">1</span><span class="token token" style="color:#9d0006">double</span><span> </span><span class="token token" style="color:#b57614">getEntropy</span><span class="token token" style="color:#7c6f64">(</span><span class="token token" style="color:#9d0006">int</span><span class="token token" style="color:#7c6f64">*</span><span> arr</span><span class="token token" style="color:#7c6f64">)</span><span class="token token" style="color:#7c6f64">{</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">2</span><span>    </span><span class="token token" style="color:#9d0006">int</span><span> freq</span><span class="token token" style="color:#7c6f64">[</span><span>n</span><span class="token token" style="color:#7c6f64">]</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">3</span><span>    </span><span class="token token" style="color:#9d0006">for</span><span class="token token" style="color:#7c6f64">(</span><span class="token token" style="color:#9d0006">int</span><span> i </span><span class="token token" style="color:#7c6f64">=</span><span> </span><span class="token token" style="color:#8f3f71">0</span><span class="token token" style="color:#7c6f64">;</span><span> i</span><span class="token token" style="color:#7c6f64">&lt;</span><span>n</span><span class="token token" style="color:#7c6f64">;</span><span> i</span><span class="token token" style="color:#7c6f64">++</span><span class="token token" style="color:#7c6f64">)</span><span> freq</span><span class="token token" style="color:#7c6f64">[</span><span>i</span><span class="token token" style="color:#7c6f64">]</span><span> </span><span class="token token" style="color:#7c6f64">=</span><span> </span><span class="token token" style="color:#8f3f71">0</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">4</span><span>    </span><span class="token token" style="color:#9d0006">double</span><span> entropy </span><span class="token token" style="color:#7c6f64">=</span><span> </span><span class="token token" style="color:#8f3f71">0.0</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">5</span><span>    </span><span class="token token" style="color:#9d0006">for</span><span class="token token" style="color:#7c6f64">(</span><span class="token token" style="color:#9d0006">int</span><span> i </span><span class="token token" style="color:#7c6f64">=</span><span> n</span><span class="token token" style="color:#7c6f64">;</span><span> i</span><span class="token token" style="color:#7c6f64">&gt;</span><span class="token token" style="color:#8f3f71">0</span><span class="token token" style="color:#7c6f64">;</span><span> i</span><span class="token token" style="color:#7c6f64">--</span><span class="token token" style="color:#7c6f64">)</span><span class="token token" style="color:#7c6f64">{</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">6</span><span>        </span><span class="token token" style="color:#7c6f64">//need to account for the wrapping of the list, setting previous 0 as n-1</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">7</span><span>        </span><span class="token token" style="color:#9d0006">int</span><span> card </span><span class="token token" style="color:#7c6f64">=</span><span> arr</span><span class="token token" style="color:#7c6f64">[</span><span>i</span><span class="token token" style="color:#7c6f64">]</span><span class="token token" style="color:#7c6f64">;</span><span> </span><span class="token token" style="color:#9d0006">int</span><span> pcard</span><span class="token token" style="color:#7c6f64">=</span><span> </span><span class="token token" style="color:#7c6f64">-</span><span class="token token" style="color:#8f3f71">1</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">8</span><span>        </span><span class="token token" style="color:#9d0006">if</span><span class="token token" style="color:#7c6f64">(</span><span>i</span><span class="token token" style="color:#7c6f64">==</span><span class="token token" style="color:#8f3f71">0</span><span class="token token" style="color:#7c6f64">)</span><span> pcard </span><span class="token token" style="color:#7c6f64">=</span><span> arr</span><span class="token token" style="color:#7c6f64">[</span><span>i</span><span class="token token" style="color:#7c6f64">-</span><span class="token token" style="color:#8f3f71">1</span><span class="token token" style="color:#7c6f64">+</span><span>n</span><span class="token token" style="color:#7c6f64">]</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">9</span><span>        </span><span class="token token" style="color:#9d0006">else</span><span> pcard</span><span class="token token" style="color:#7c6f64">=</span><span> arr</span><span class="token token" style="color:#7c6f64">[</span><span>i</span><span class="token token" style="color:#7c6f64">-</span><span class="token token" style="color:#8f3f71">1</span><span class="token token" style="color:#7c6f64">]</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">10</span><span>        </span><span class="token token" style="color:#9d0006">int</span><span> diff </span><span class="token token" style="color:#7c6f64">=</span><span> </span><span class="token token" style="color:#7c6f64">(</span><span>card </span><span class="token token" style="color:#7c6f64">-</span><span> pcard </span><span class="token token" style="color:#7c6f64">+</span><span> n</span><span class="token token" style="color:#7c6f64">)</span><span class="token token" style="color:#7c6f64">%</span><span>n</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">11</span><span>        freq</span><span class="token token" style="color:#7c6f64">[</span><span>diff</span><span class="token token" style="color:#7c6f64">]</span><span> </span><span class="token token" style="color:#7c6f64">=</span><span> freq</span><span class="token token" style="color:#7c6f64">[</span><span>diff</span><span class="token token" style="color:#7c6f64">]</span><span> </span><span class="token token" style="color:#7c6f64">+</span><span> </span><span class="token token" style="color:#8f3f71">1</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">12</span><span>    </span><span class="token token" style="color:#7c6f64">}</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">13</span><span>    </span><span class="token token" style="color:#9d0006">for</span><span class="token token" style="color:#7c6f64">(</span><span class="token token" style="color:#9d0006">int</span><span> i </span><span class="token token" style="color:#7c6f64">=</span><span> </span><span class="token token" style="color:#8f3f71">0</span><span class="token token" style="color:#7c6f64">;</span><span> i</span><span class="token token" style="color:#7c6f64">&lt;</span><span>n</span><span class="token token" style="color:#7c6f64">;</span><span> i</span><span class="token token" style="color:#7c6f64">++</span><span class="token token" style="color:#7c6f64">)</span><span class="token token" style="color:#7c6f64">{</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">14</span><span>        </span><span class="token token" style="color:#7c6f64">//sum probabilities of x in X adjusted by entropy formula</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">15</span><span>        </span><span class="token token" style="color:#9d0006">if</span><span class="token token" style="color:#7c6f64">(</span><span>freq</span><span class="token token" style="color:#7c6f64">[</span><span>i</span><span class="token token" style="color:#7c6f64">]</span><span class="token token" style="color:#7c6f64">!=</span><span class="token token" style="color:#8f3f71">0</span><span class="token token" style="color:#7c6f64">)</span><span class="token token" style="color:#7c6f64">{</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">16</span><span>            </span><span class="token token" style="color:#7c6f64">//probability of selecting card i in the set of all N cards</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">17</span><span>            </span><span class="token token" style="color:#9d0006">double</span><span> p </span><span class="token token" style="color:#7c6f64">=</span><span> </span><span class="token token" style="color:#7c6f64">(</span><span class="token token" style="color:#9d0006">double</span><span class="token token" style="color:#7c6f64">)</span><span>freq</span><span class="token token" style="color:#7c6f64">[</span><span>i</span><span class="token token" style="color:#7c6f64">]</span><span class="token token" style="color:#7c6f64">/</span><span class="token token" style="color:#7c6f64">(</span><span class="token token" style="color:#9d0006">double</span><span class="token token" style="color:#7c6f64">)</span><span>n</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">18</span><span>            </span><span class="token token" style="color:#7c6f64">//formula https://en.wikipedia.org/wiki/Entropy_(information_theory)</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">19</span><span>            </span><span class="token token" style="color:#9d0006">double</span><span> x </span><span class="token token" style="color:#7c6f64">=</span><span> </span><span class="token token" style="color:#7c6f64">-</span><span class="token token" style="color:#8f3f71">1</span><span class="token token" style="color:#7c6f64">*</span><span>p</span><span class="token token" style="color:#7c6f64">*</span><span class="token token" style="color:#b57614">log</span><span class="token token" style="color:#7c6f64">(</span><span>p</span><span class="token token" style="color:#7c6f64">)</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">20</span><span>            entropy </span><span class="token token" style="color:#7c6f64">=</span><span> entropy </span><span class="token token" style="color:#7c6f64">+</span><span> x</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">21</span><span>        </span><span class="token token" style="color:#7c6f64">}</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">22</span><span>    </span><span class="token token" style="color:#7c6f64">}</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">23</span><span>    </span><span class="token token" style="color:#9d0006">return</span><span> entropy</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">24</span><span></span><span class="token token" style="color:#7c6f64">}</span></span></code></pre><br/> <br/></ol></div><div class="col-start-1 col-span-7 mobile:col-span-10"><p>For a deck of 52 cards, a fully randomized deck using the fisher-yates shuffle will average around a 3.3 entropy score. This number does not have any units so its only scale is against 0 and itself.</p><br/><p>For example, a larger deck naturally contains more information, so its entropy while shuffled is higher. With N=1000, maximum entropy increases to ~6.41, as the scale is logerithmic.</p><br/><p></p><br/> <br/></div><div id="RiffleChart" class="col-span-10 p-2 w-3/4 mobile:w-[95%] place-self-center outline outline-black dark:outline-white outline-2 outline-offset-8 rounded-[10px] h-fit"> <canvas role="img" height="150" width="300"></canvas> </div><div class="col-start-1 col-span-7 mobile:col-span-10"><br/> <br/> <br/><p>The average position of the first card to be a good approximator for how random the deck is, since it can also contain more information than a simple scalar value. Our large sample size allows us to utilize the law of large numbers and make inferences with high confidence when a particular pattern is found.</p><br/><p>The next graph shows how the riffle shuffle impacts games based on two parameters: packet size, and iteration count.</p><br/></div><div class="col-start-2 mobile:col-start-2 mobile:col-end-10 col-end-8"><ol class="list-disc"><br/><li>X-Axis: number of shuffle iterations</li><br/><li>Y-Axis: probability of a straight happening in game</li><br/><li class="list-none">Notes: Lighter colors represent a high max packet parameter which represent &#x27;looser&#x27; or &#x27;worse&#x27; riffle shuffles. Darker  colors are clean riffle shuffles, with a tighter spread, see the above example.</li><br/><li>Both Charts: 5 players, 5 card board, 2 card hands</li><br/><li>Chart 1: &quot;New Deck Start&quot;, a completely fresh deck, new out of the box</li><br/><li class="list-none">Example:</li><li class="list-none">[0, 1, 2, 3, 4, 5, 6, 7, ... 49, 50, 51]</li><li class="list-none">Notes: Unrealistic, but worst case scenario.</li><br/><li>Chart 2: &quot;Rigged Start&quot;, There are 5 cards in a row, while the rest of the deck is random</li><br/><li>This situation more closely represents this common situation: a player who wins a hand with a straight may put their cards on the flop, and this pack of cards gets shuffled into the deck.</li><br/><li class="list-none">Example:</li><li class="list-none flex">[7, 12,<p class="dark:text-green text-red font-bold"> 0, 1, 2, 3, 4,</p> 9, ... 12, 5, 2]</li><li class="list-none">Notes: I am only keeping track of straights, only ranks need to be tracked.</li><br/><li>1,000,000 runs per data point</li></ol><br/><br/><br/></div><div id="New Deck Start" class="h-fit col-span-10 p-2 w-[80vw] mobile:w-[95%] place-self-center outline outline-black dark:outline-white outline-2 outline-offset-8 rounded-[10px] "> <canvas role="img" height="150" width="300"></canvas> </div><div class="col-span-7 mobile:col-span-10"><br/><p class="text-sm text-center mt-2">The chart is interactive, click the &quot;1&quot; dataset in the legend to hide it.</p><br/><p class="text-2xl">Outliers and Quantum Wave Theory?</p><p>Notice how much of an outlier the shuffle with MaxPacket=1 is. This shuffle is equivalent to the Faro shuffle, where every card is interleaved perfectly, definitively showing that the Faro shuffle is deterministic and should not be used for real-world shuffling. A side note: closely observe card magicians, this shuffle appears frequently because it is deterministic and makes it easier to force cards.</p><br/><p>The red line in this graph represents a perfectly shuffled deck, replacing a riffle shuffle with the Fisher-Yates algorithm. The first thing to notice is how the lighter, worse shuffles take much longer to converge to the expected value of straights. This is easily explained by the mechanics of the shuffle: with larger packet sizes, you may miss breaking up the straight, making it more likely in all subsequent runs.</p><br/><p>One thing I have trouble explaining is the sudden dip in probability below the expected value. I don&#x27;t understand the mechanics of why this happens, but it is repeated in all of the attempts I made.</p><br/><p>Rationalizing Error with Waves (Conjecture)</p><br/><p>The first thing to know is that this simulation is limited and has strict parameters. Real-world shuffles have a lot more variation that cannot be explained by &quot;MinPackets&quot; and &quot;MaxPackets&quot; as described in the implementations. For simulations that are bounded by strict rules, such as this one, wave functions could provide a mathematical grounding for the result.</p><br/><p><a href="https://en.wikipedia.org/wiki/Wave_function">Quantum waves</a> are essentially probability distribution functions for fundamental particles such as photons. This theory has been applied to computational processes like terrain generation. Imagine one shuffle moves the cards around according to a sine wave, and multiple shuffles move cards based on the combinations of those waves. In theory, it would be possible to construct a wave function for a certain type of shuffle and use that function to predict the distribution of cards at a specific number of shuffles. This is more interesting because you could combine multiple types of shuffles in this fashion to predict the distribution of cards when combining Riffle and Hindu shuffles.</p><br/><p><i>Hypothesis: Given a set of well defined shuffling algorithms, you can calculate the probility distribution for every element by multiplying the &#x27;Wave fucntion&#x27; in a non-commutative operation.</i></p><br/><br/><br/></div><div id="Rigged Start" class="h-fit col-span-10 p-2 w-[80vw] mobile:w-[95%] place-self-center outline outline-black dark:outline-white outline-2 outline-offset-8 rounded-[10px] "> <canvas role="img" height="150" width="300"></canvas> </div><div class="col-span-7 mobile:col-span-10"><br/><br/><br/><p>Even in a &quot;mostly&quot; randomized deck, the deterministic nature of the Faro shuffle demonstrates that it distorts the asymptotic behavior of this shuffling algorithm.</p><br/><p>Even with this outlier remved (interact with the legend), we still observe this strange dip in straight probability with <i>Iterations</i>=2. Comparing this to the entropy graph, we can see that all types of shuffles eventually converge to a probability of about 4% with no strange deviation. This is close to the expected for a <a href="https://en.wikipedia.org/wiki/Poker_probability#7-card_poker_hands">7-card poker hand</a> which makes me believe this simulation is a good approximation for real games.</p></div><div class="col-span-7 mobile:col-span-10"><br/> <br/><p class="text-3xl">Hindu Analysis</p></div><div class="col-start-2 col-end-8 mobile:col-start-2 mobile:col-end-10"> <br/> <pre id=":R96l6:" class="growIn ring-2 ring-black dark:ring-white element h-fit w-fit relative m-6 text-sm p-3 rounded-lg overflow-scroll mobile:w-auto" style="color:#3c3836;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#f9f5d7"><div id=":R96l6:decoration" class="absolute right-2 top-2 transition duration-300 flex"><button class="transition duration-300 rounded outline-dashed outline-1 outline-offset-2 mr-[20px] opacity-50 hover:opacity-100 hover:text-lightWarning click focus-scale-75 active:scale-75">shrink</button><p class="mr-2 opacity-50">cpp</p><a class=""><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium transition duration-100 focus:scale-75 active:scale-75  opacity-20  hover:opacity-100 hover:fill-lightWarning click mui-style-vubbuv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ContentCopyTwoToneIcon"><path d="M8 7h11v14H8z" opacity=".3"></path><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></a></div><code class="language-cpp" style="color:#3c3836;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">1</span><span class="token token" style="color:#9d0006">void</span><span> </span><span class="token token" style="color:#b57614">hindu</span><span class="token token" style="color:#7c6f64">(</span><span class="token token" style="color:#9d0006">int</span><span class="token token" style="color:#7c6f64">*</span><span> arr</span><span class="token token" style="color:#7c6f64">,</span><span class="token token" style="color:#9d0006">int</span><span> maxpacket</span><span class="token token" style="color:#7c6f64">)</span><span class="token token" style="color:#7c6f64">{</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">2</span><span>    deque</span><span class="token token" style="color:#7c6f64">&lt;</span><span> deque</span><span class="token token" style="color:#7c6f64">&lt;</span><span class="token token" style="color:#9d0006">int</span><span class="token token" style="color:#7c6f64">&gt;</span><span> </span><span class="token token" style="color:#7c6f64">&gt;</span><span> decklist</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">3</span><span>    </span><span class="token token" style="color:#9d0006">int</span><span> i </span><span class="token token" style="color:#7c6f64">=</span><span> </span><span class="token token" style="color:#8f3f71">0</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">4</span><span>    </span><span class="token token" style="color:#9d0006">while</span><span class="token token" style="color:#7c6f64">(</span><span>i</span><span class="token token" style="color:#7c6f64">&lt;</span><span>n</span><span class="token token" style="color:#7c6f64">)</span><span class="token token" style="color:#7c6f64">{</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">5</span><span>        </span><span class="token token" style="color:#7c6f64">//set a packet length to be transfered</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">6</span><span>        </span><span class="token token" style="color:#9d0006">int</span><span> p </span><span class="token token" style="color:#7c6f64">=</span><span> </span><span class="token token" style="color:#b57614">rand</span><span class="token token" style="color:#7c6f64">(</span><span class="token token" style="color:#7c6f64">)</span><span class="token token" style="color:#7c6f64">%</span><span>maxpacket</span><span class="token token" style="color:#7c6f64">+</span><span class="token token" style="color:#8f3f71">1</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">7</span><span>        deque</span><span class="token token" style="color:#7c6f64">&lt;</span><span class="token token" style="color:#9d0006">int</span><span class="token token" style="color:#7c6f64">&gt;</span><span> deck</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">8</span><span>        </span><span class="token token" style="color:#9d0006">for</span><span class="token token" style="color:#7c6f64">(</span><span class="token token" style="color:#9d0006">int</span><span> j </span><span class="token token" style="color:#7c6f64">=</span><span> </span><span class="token token" style="color:#8f3f71">0</span><span class="token token" style="color:#7c6f64">;</span><span> j</span><span class="token token" style="color:#7c6f64">&lt;</span><span>p</span><span class="token token" style="color:#7c6f64">;</span><span> j</span><span class="token token" style="color:#7c6f64">++</span><span class="token token" style="color:#7c6f64">)</span><span class="token token" style="color:#7c6f64">{</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">9</span><span>            </span><span class="token token" style="color:#9d0006">if</span><span class="token token" style="color:#7c6f64">(</span><span>i</span><span class="token token" style="color:#7c6f64">+</span><span>j</span><span class="token token" style="color:#7c6f64">&gt;=</span><span>n</span><span class="token token" style="color:#7c6f64">)</span><span> </span><span class="token token" style="color:#7c6f64">{</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">10</span><span>                </span><span class="token token" style="color:#7c6f64">//all cards have been place in &#x27;deck&#x27;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">11</span><span>                </span><span class="token token" style="color:#9d0006">break</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">12</span><span>            </span><span class="token token" style="color:#7c6f64">}</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">13</span><span>            deck</span><span class="token token" style="color:#7c6f64">.</span><span class="token token" style="color:#b57614">push_back</span><span class="token token" style="color:#7c6f64">(</span><span>arr</span><span class="token token" style="color:#7c6f64">[</span><span>i</span><span class="token token" style="color:#7c6f64">+</span><span>j</span><span class="token token" style="color:#7c6f64">]</span><span class="token token" style="color:#7c6f64">)</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">14</span><span>        </span><span class="token token" style="color:#7c6f64">}</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">15</span><span>        i</span><span class="token token" style="color:#7c6f64">+=</span><span>p</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">16</span><span>        </span><span class="token token" style="color:#7c6f64">//place correctly moved packet to the top of the new decklist</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">17</span><span>        decklist</span><span class="token token" style="color:#7c6f64">.</span><span class="token token" style="color:#b57614">push_front</span><span class="token token" style="color:#7c6f64">(</span><span>deck</span><span class="token token" style="color:#7c6f64">)</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">18</span><span>    </span><span class="token token" style="color:#7c6f64">}</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">19</span><span>    i </span><span class="token token" style="color:#7c6f64">=</span><span> </span><span class="token token" style="color:#8f3f71">0</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">20</span><span>    </span><span class="token token" style="color:#7c6f64">//copy the new shuffled deck to the existing deck array</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">21</span><span>    </span><span class="token token" style="color:#9d0006">while</span><span class="token token" style="color:#7c6f64">(</span><span class="token token" style="color:#7c6f64">!</span><span>decklist</span><span class="token token" style="color:#7c6f64">.</span><span class="token token" style="color:#b57614">empty</span><span class="token token" style="color:#7c6f64">(</span><span class="token token" style="color:#7c6f64">)</span><span class="token token" style="color:#7c6f64">)</span><span class="token token" style="color:#7c6f64">{</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">22</span><span>        deque</span><span class="token token" style="color:#7c6f64">&lt;</span><span class="token token" style="color:#9d0006">int</span><span class="token token" style="color:#7c6f64">&gt;</span><span> packet </span><span class="token token" style="color:#7c6f64">=</span><span> decklist</span><span class="token token" style="color:#7c6f64">.</span><span class="token token" style="color:#b57614">front</span><span class="token token" style="color:#7c6f64">(</span><span class="token token" style="color:#7c6f64">)</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">23</span><span>        deque</span><span class="token token" style="color:#7c6f64">&lt;</span><span class="token token" style="color:#9d0006">int</span><span class="token token" style="color:#7c6f64">&gt;</span><span class="token token double-colon" style="color:#7c6f64">::</span><span>iterator pit </span><span class="token token" style="color:#7c6f64">=</span><span> packet</span><span class="token token" style="color:#7c6f64">.</span><span class="token token" style="color:#b57614">begin</span><span class="token token" style="color:#7c6f64">(</span><span class="token token" style="color:#7c6f64">)</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">24</span><span>        </span><span class="token token" style="color:#9d0006">while</span><span class="token token" style="color:#7c6f64">(</span><span>pit </span><span class="token token" style="color:#7c6f64">!=</span><span> packet</span><span class="token token" style="color:#7c6f64">.</span><span class="token token" style="color:#b57614">end</span><span class="token token" style="color:#7c6f64">(</span><span class="token token" style="color:#7c6f64">)</span><span class="token token" style="color:#7c6f64">)</span><span class="token token" style="color:#7c6f64">{</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">25</span><span>            arr</span><span class="token token" style="color:#7c6f64">[</span><span>i</span><span class="token token" style="color:#7c6f64">++</span><span class="token token" style="color:#7c6f64">]</span><span> </span><span class="token token" style="color:#7c6f64">=</span><span> </span><span class="token token" style="color:#7c6f64">*</span><span>pit</span><span class="token token" style="color:#7c6f64">++</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">26</span><span>        </span><span class="token token" style="color:#7c6f64">}</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">27</span><span>        decklist</span><span class="token token" style="color:#7c6f64">.</span><span class="token token" style="color:#b57614">pop_front</span><span class="token token" style="color:#7c6f64">(</span><span class="token token" style="color:#7c6f64">)</span><span class="token token" style="color:#7c6f64">;</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">28</span><span>    </span><span class="token token" style="color:#7c6f64">}</span><span>
</span></span><span style="display:flex"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7c6f64">29</span><span></span><span class="token token" style="color:#7c6f64">}</span></span></code></pre> </div><div class="col-span-7 mobile:col-span-10"><br/><p>Keep in mind that the hindu and overhand shuffles are equivalent in terms of how the cards are being cycled. This simulation has 10,000,000 individual shuffles, with 1,000 iterations. This one took a while to run, and resulted in very large files as every result was saved. The representation of the results was quite challenging because of how much data was generated.</p><br/><br/></div><div id="HinduChart" class="col-span-10 p-2 w-3/4 mobile:w-[95%] place-self-center outline outline-black dark:outline-white outline-2 outline-offset-8 rounded-[10px] h-fit"> <canvas role="img" height="150" width="300"></canvas> </div><div class="col-span-7 mobile:col-span-10"><br/> <br/><p>Pay attention to the 1st, 8th, and 16th cards and how their iteration numbers always maintain the same parity (even/odd). This can be explained by the mechanics of how the Overhand shuffle works. Since you are moving packets of cards to the bottom, the first shuffle slightly randomizes the order but absolutely reverses the typical ordering of the deck, only to be swapped back to a similar starting position on the next shuffle. This stratification effect is observed at all packet sizes but is most visible in low numbers. Simply adding more variability to the packet size results in faster convergence to a truly random deck.</p><br/><p>There is no entropy field in this specific dataset, but the standard entropy calculation will not capture this detail about parity swapping.</p><br/><p>To visually demonstrate why you should never use an Overhand or Hindu shuffle in any games where you care about randomness, take a look at how the first card travels through parts of the deck over the course of 15 shuffles:</p><br/><br/></div><br/><br/><div id="hinduHistogramData" class="col-span-10 p-2 w-3/4 mobile:w-[95%] place-self-center outline outline-black dark:outline-white outline-2 outline-offset-8 rounded-[10px] h-fit"> <!-- --> <canvas role="img" height="150" width="300" class=" rounded-[10px] p-4undefined"></canvas> <!-- --> </div><div class="col-span-7 mobile:col-span-10"><br/><br/><br/><p class="text-3xl">Conclusion</p><br/><p>It is save to say that the mathematicians were right in recommending 7 Riffle shuffles. What they didn&#x27;t say was how that assumption can fall apart with mediocre technique. I will add more common shuffling techniques and more in depth analysis in the future.</p></div></div></div><br/><br/><br/><br/><div class="mobile:grid mobile:grid-cols-3 flex justify-center"><div class="max-w-[100px] place-self-center text-right"> <a target="_blank" href="https://github.com/DavidCincotta"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium h-1/2 w-1/2 transition ease-in-out duration-[700ms] fill-none stroke-black dark:stroke-white hover:rotate-[20deg] hover:stroke-purple dark:hover:stroke-yellow mui-style-vubbuv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="GitHubIcon"><path d="M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"></path></svg></a> </div><div class="max-w-[100px] place-self-center text-center"> <a target="_blank" href="https://www.linkedin.com/in/david-cincotta-a20384171/"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium h-1/2 w-1/2 transition ease-in-out duration-[700ms] fill-none stroke-black dark:stroke-white hover:rotate-[20deg] hover:stroke-purple dark:hover:stroke-yellow mui-style-vubbuv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="LinkedInIcon"><path d="M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"></path></svg></a> </div><div class="max-w-[100px] place-self-center text-left"> <a target="_blank" href="mailto:decincotta@gmail.com"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium h-1/2 w-1/2 transition ease-in-out duration-[700ms] fill-none stroke-black dark:stroke-white hover:rotate-[20deg] hover:stroke-purple dark:hover:stroke-yellow mui-style-vubbuv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="MailIcon"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"></path></svg></a> </div></div><br/></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{}},"page":"/projects/cardsim","query":{},"buildId":"24fTu9mgmmVrSThJnis46","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>